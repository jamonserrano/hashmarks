!function(e,t){if("function"==typeof define&&define.amd)define(["module","exports"],t);else if("undefined"!=typeof exports)t(module,exports);else{var n={exports:{}};t(n,n.exports),e.Scrollmarks=n.exports}}(this,function(e,t){"use strict";function n(e){!function(e){var t=g.get(e);t&&t.helper&&document.body.removeChild(t.helper)}(e);var t=g.delete(e);return g.size||o(),t}function r(){y=!0}function o(){y=!1}function i(){if(window.requestAnimationFrame(i),z===v.resizeThrottle){if(P)c(l),P=!1;else{var e=document.body.scrollHeight;C!==e&&(c(l),C=e)}z=1}else z++;O===v.scrollThrottle?(E&&(!function(){var e=window.pageYOffset;if(y){var t=[];k=x<e?"down":"up",g.forEach(function(n){var r=n.direction;if(null!==n.element.offsetParent&&u(r)){var o=n.triggerPoint;x<o==o<=e&&t.push(n)}}),t.length&&function(e){e.sort("down"===k?function(e,t){return e.triggerPoint-t.triggerPoint}:function(e,t){return t.triggerPoint-e.triggerPoint}),e.forEach(f)}(t)}x=e}(),E=!1),O=1):O++}function f(e){var t=e.once;e.callback(k,e),t&&n(e.key)}function u(e,t){return!e||e===(t||k)}function l(){g.forEach(s)}function s(e){var t=e.computedOffset,n=p(t)?t(e.element):t;if(!a(n))throw new TypeError("Offset function must return a number, got "+n+" instead");e.triggerPoint=window.pageYOffset+e.element.getBoundingClientRect().top-n,e.debug&&function(e){var t=e.helper;if(!t){(t=document.createElement("div")).className="scrollmarks-helper";var n={background:"#67CF93",borderTop:"2px solid",color:"#333",font:"14px monospace",left:"0",minHeight:"20px",padding:"0 3px",position:"absolute",width:"100%",zIndex:9999};Object.keys(n).forEach(function(e){return t.style[e]=n[e]}),e.helper=t,document.body.appendChild(t)}t.style.top=e.triggerPoint+"px",t.innerHTML="offset: "+e.offset+", computedOffset: "+(p(e.computedOffset)?e.computedOffset(e.element):e.computedOffset)+", triggerPoint: "+e.triggerPoint+"px"}(e)}function c(e){var t=v.idleTimeout;0===t?e():b?window.requestIdleCallback(e,{timeout:t}):window.setTimeout(e,0)}function a(e){return"number"==typeof e}function d(e){return"string"==typeof e}function p(e){return"function"==typeof e}function m(e){return void 0===e}function h(e){return"boolean"==typeof e}function w(e,t,n,r){return""+e+(e?" parameter":"Parameter")+" '"+t+"' must be "+n+", got "+r+" instead"}Object.defineProperty(t,"__esModule",{value:!0});/**
  * @license
  * Scrollmarks 1.0.2
  * Copyright (c) 2017 Viktor Honti
  * Licensed under the MIT License.
  * https://github.com/jamonserrano/scrollmarks
  */
var g=window.Map?new Map:Object.defineProperties(Object.create(null),{delete:{value:function(e){return this.has(e)&&delete this[e]}},forEach:{value:function(e){var t=this;Object.keys(this).forEach(function(n){return e(t[n],n,t)})}},get:{value:function(e){return this[e]}},has:{value:function(e){return!m(this[e])}},set:{value:function(e,t){return this[e]=t,this}},size:{get:function(){return Object.keys(this).length}}}),v={scrollThrottle:10,resizeThrottle:30,idleTimeout:100},b=Boolean(window.requestIdleCallback),T=0,y=!1,E=!1,O=1,x=0,k=void 0,P=!1,z=1,C=document.body.scrollHeight,j=!1;window.addEventListener("test",null,{get passive(){j={passive:!0}}}),window.addEventListener("scroll",function(){window.requestAnimationFrame(function(){return E=!0})},j),window.addEventListener("resize",function(){window.requestAnimationFrame(function(){return P=!0})},j),window.requestAnimationFrame(i),t.default={add:function(e){var t=e.element,n=e.callback,o=e.offset,i=e.direction,l=e.once,c=e.debug;if(!(t instanceof HTMLElement))throw new TypeError(w("","element","an HTML Element",t));if(!p(n))throw new TypeError(w("","callback","a function",n));if(m(o))e.computedOffset=0;else if(a(o)||p(o))e.computedOffset=o;else if(d(o)&&"%"===o.slice(-1))e.computedOffset=function(){return window.innerHeight*parseInt(o)/100};else{if(!d(o)||"px"!==o.slice(-2))throw new TypeError(w("Optional","offset","a number, px, %, or a function",o));e.computedOffset=parseInt(o)}if(!m(i)&&"up"!==i&&"down"!==i)throw new TypeError(w("Optional","direction","'up' or 'down'",i));if(!m(l)&&!h(l))throw new TypeError(w("Optional","once","boolean",l));if(!m(c)&&!h(c))throw new TypeError(w("Optional","debug","boolean",c));s(e);var v=T++;return e.key=v,g.set(v,e),u(i,"down")&&e.triggerPoint<=x&&f(e),r(),v},remove:n,start:r,stop:o,refresh:function(e){if(m(e))c(l);else{if(!g.has(e))throw new ReferenceError("Could not refresh scrollmark '"+e+"', mark doesn't exist");c(function(){return s(g.get(e))})}},config:function(e){if(m(e))return{scrollThrottle:v.scrollThrottle,resizeThrottle:v.resizeThrottle,idleTimeout:v.idleTimeout};Object.keys(e).forEach(function(t){return function(e,t){if(-1===["scrollThrottle","resizeThrottle","idleTimeout"].indexOf(e))throw new ReferenceError("Invalid config parameter: '"+e+"'");var n="idleTimeout"===e?0:1;if(!a(t))throw new TypeError(w("Config",e,"a number",t));if(t<n)throw new RangeError(w("Config",e,"at least "+n,t));v[e]=t}(t,e[t])}),O=1,z=1}},e.exports=t.default});